!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("next-tick")):"function"==typeof define&&define.amd?define(["exports","react","next-tick"],e):e((n||self).useRnAsyncQueue={},n.react,n.nextTick)}(this,function(n,e,t){function u(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var r=/*#__PURE__*/u(t);n.useRnAsyncQueue=function(n){const{done:t,drain:u,inflight:c}=n;let{concurrency:i}=n;i<1&&(i=Infinity);const[s,o]=e.useState({numPending:0,numInFlight:0,numDone:0}),f=e.useRef(!0),l=e.useRef([]),a=e.useRef([]);return e.useEffect(()=>{if(s.numDone>0&&u&&0===l.current.length&&0===a.current.length&&!f.current)return f.current=!0,r.default(u);for(;l.current.length<i&&a.current.length>0;){f.current=!1;const n=a.current.shift();l.current.push(n),o(n=>({...n,numPending:n.numPending-1,numInFlight:n.numInFlight+1})),c&&c({...n,stats:s});const e=n.task();e.then(()=>{l.current.pop(),o(n=>({...n,numInFlight:n.numInFlight-1,numDone:n.numDone+1})),t&&t({...n,result:e,stats:s})}).catch(()=>{l.current.pop(),o(n=>({...n,numInFlight:n.numInFlight-1,numDone:n.numDone+1})),t&&t({...n,result:e,stats:s})})}},[i,t,u,c,s]),{add:e.useCallback(n=>{a.current.push(n),o(n=>({...n,numPending:n.numPending+1}))},[]),stats:s}}});
//# sourceMappingURL=use-rn-async-queue.umd.js.map
